<!DOCTYPE html><html lang="en"> <head><!-- google tag manager --><!-- favicon --><link rel="shortcut icon" href="/images/favicon.png"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"><meta name="generator" content="Astro v5.7.10"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- google font css --><style>@font-face {unicode-range: U+0307-0308, U+0590-05FF, U+200C-2010, U+20AA, U+25CC, U+FB1D-FB4F;font-weight: 400;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9H0TbFhsqMA6aw.woff2)} @font-face {unicode-range: U+0302-0303, U+0305, U+0307-0308, U+0310, U+0312, U+0315, U+031A, U+0326-0327, U+032C, U+032F-0330, U+0332-0333, U+0338, U+033A, U+0346, U+034D, U+0391-03A1, U+03A3-03A9, U+03B1-03C9, U+03D1, U+03D5-03D6, U+03F0-03F1, U+03F4-03F5, U+2016-2017, U+2034-2038, U+203C, U+2040, U+2043, U+2047, U+2050, U+2057, U+205F, U+2070-2071, U+2074-208E, U+2090-209C, U+20D0-20DC, U+20E1, U+20E5-20EF, U+2100-2112, U+2114-2115, U+2117-2121, U+2123-214F, U+2190, U+2192, U+2194-21AE, U+21B0-21E5, U+21F1-21F2, U+21F4-2211, U+2213-2214, U+2216-22FF, U+2308-230B, U+2310, U+2319, U+231C-2321, U+2336-237A, U+237C, U+2395, U+239B-23B7, U+23D0, U+23DC-23E1, U+2474-2475, U+25AF, U+25B3, U+25B7, U+25BD, U+25C1, U+25CA, U+25CC, U+25FB, U+266D-266F, U+27C0-27FF, U+2900-2AFF, U+2B0E-2B11, U+2B30-2B4C, U+2BFE, U+3030, U+FF5B, U+FF5D, U+1D400-1D7FF, U+1EE00-1EEFF;font-weight: 400;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9GKTbFhsqMA6aw.woff2)} @font-face {unicode-range: U+0001-000C, U+000E-001F, U+007F-009F, U+20DD-20E0, U+20E2-20E4, U+2150-218F, U+2190, U+2192, U+2194-2199, U+21AF, U+21E6-21F0, U+21F3, U+2218-2219, U+2299, U+22C4-22C6, U+2300-243F, U+2440-244A, U+2460-24FF, U+25A0-27BF, U+2800-28FF, U+2921-2922, U+2981, U+29BF, U+29EB, U+2B00-2BFF, U+4DC0-4DFF, U+FFF9-FFFB, U+10140-1018E, U+10190-1019C, U+101A0, U+101D0-101FD, U+102E0-102FB, U+10E60-10E7E, U+1D2C0-1D2D3, U+1D2E0-1D37F, U+1F000-1F0FF, U+1F100-1F1AD, U+1F1E6-1F1FF, U+1F30D-1F30F, U+1F315, U+1F31C, U+1F31E, U+1F320-1F32C, U+1F336, U+1F378, U+1F37D, U+1F382, U+1F393-1F39F, U+1F3A7-1F3A8, U+1F3AC-1F3AF, U+1F3C2, U+1F3C4-1F3C6, U+1F3CA-1F3CE, U+1F3D4-1F3E0, U+1F3ED, U+1F3F1-1F3F3, U+1F3F5-1F3F7, U+1F408, U+1F415, U+1F41F, U+1F426, U+1F43F, U+1F441-1F442, U+1F444, U+1F446-1F449, U+1F44C-1F44E, U+1F453, U+1F46A, U+1F47D, U+1F4A3, U+1F4B0, U+1F4B3, U+1F4B9, U+1F4BB, U+1F4BF, U+1F4C8-1F4CB, U+1F4D6, U+1F4DA, U+1F4DF, U+1F4E3-1F4E6, U+1F4EA-1F4ED, U+1F4F7, U+1F4F9-1F4FB, U+1F4FD-1F4FE, U+1F503, U+1F507-1F50B, U+1F50D, U+1F512-1F513, U+1F53E-1F54A, U+1F54F-1F5FA, U+1F610, U+1F650-1F67F, U+1F687, U+1F68D, U+1F691, U+1F694, U+1F698, U+1F6AD, U+1F6B2, U+1F6B9-1F6BA, U+1F6BC, U+1F6C6-1F6CF, U+1F6D3-1F6D7, U+1F6E0-1F6EA, U+1F6F0-1F6F3, U+1F6F7-1F6FC, U+1F700-1F7FF, U+1F800-1F80B, U+1F810-1F847, U+1F850-1F859, U+1F860-1F887, U+1F890-1F8AD, U+1F8B0-1F8BB, U+1F8C0-1F8C1, U+1F900-1F90B, U+1F93B, U+1F946, U+1F984, U+1F996, U+1F9E9, U+1FA00-1FA6F, U+1FA70-1FA7C, U+1FA80-1FA89, U+1FA8F-1FAC6, U+1FACE-1FADC, U+1FADF-1FAE9, U+1FAF0-1FAF8, U+1FB00-1FBFF;font-weight: 400;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9GYTbFhsqMA6aw.woff2)} @font-face {unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;font-weight: 400;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9H4TbFhsqMA6aw.woff2)} @font-face {unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;font-weight: 400;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9H2TbFhsqMA.woff2)} @font-face {unicode-range: U+0307-0308, U+0590-05FF, U+200C-2010, U+20AA, U+25CC, U+FB1D-FB4F;font-weight: 600;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9H0TbFhsqMA6aw.woff2)} @font-face {unicode-range: U+0302-0303, U+0305, U+0307-0308, U+0310, U+0312, U+0315, U+031A, U+0326-0327, U+032C, U+032F-0330, U+0332-0333, U+0338, U+033A, U+0346, U+034D, U+0391-03A1, U+03A3-03A9, U+03B1-03C9, U+03D1, U+03D5-03D6, U+03F0-03F1, U+03F4-03F5, U+2016-2017, U+2034-2038, U+203C, U+2040, U+2043, U+2047, U+2050, U+2057, U+205F, U+2070-2071, U+2074-208E, U+2090-209C, U+20D0-20DC, U+20E1, U+20E5-20EF, U+2100-2112, U+2114-2115, U+2117-2121, U+2123-214F, U+2190, U+2192, U+2194-21AE, U+21B0-21E5, U+21F1-21F2, U+21F4-2211, U+2213-2214, U+2216-22FF, U+2308-230B, U+2310, U+2319, U+231C-2321, U+2336-237A, U+237C, U+2395, U+239B-23B7, U+23D0, U+23DC-23E1, U+2474-2475, U+25AF, U+25B3, U+25B7, U+25BD, U+25C1, U+25CA, U+25CC, U+25FB, U+266D-266F, U+27C0-27FF, U+2900-2AFF, U+2B0E-2B11, U+2B30-2B4C, U+2BFE, U+3030, U+FF5B, U+FF5D, U+1D400-1D7FF, U+1EE00-1EEFF;font-weight: 600;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9GKTbFhsqMA6aw.woff2)} @font-face {unicode-range: U+0001-000C, U+000E-001F, U+007F-009F, U+20DD-20E0, U+20E2-20E4, U+2150-218F, U+2190, U+2192, U+2194-2199, U+21AF, U+21E6-21F0, U+21F3, U+2218-2219, U+2299, U+22C4-22C6, U+2300-243F, U+2440-244A, U+2460-24FF, U+25A0-27BF, U+2800-28FF, U+2921-2922, U+2981, U+29BF, U+29EB, U+2B00-2BFF, U+4DC0-4DFF, U+FFF9-FFFB, U+10140-1018E, U+10190-1019C, U+101A0, U+101D0-101FD, U+102E0-102FB, U+10E60-10E7E, U+1D2C0-1D2D3, U+1D2E0-1D37F, U+1F000-1F0FF, U+1F100-1F1AD, U+1F1E6-1F1FF, U+1F30D-1F30F, U+1F315, U+1F31C, U+1F31E, U+1F320-1F32C, U+1F336, U+1F378, U+1F37D, U+1F382, U+1F393-1F39F, U+1F3A7-1F3A8, U+1F3AC-1F3AF, U+1F3C2, U+1F3C4-1F3C6, U+1F3CA-1F3CE, U+1F3D4-1F3E0, U+1F3ED, U+1F3F1-1F3F3, U+1F3F5-1F3F7, U+1F408, U+1F415, U+1F41F, U+1F426, U+1F43F, U+1F441-1F442, U+1F444, U+1F446-1F449, U+1F44C-1F44E, U+1F453, U+1F46A, U+1F47D, U+1F4A3, U+1F4B0, U+1F4B3, U+1F4B9, U+1F4BB, U+1F4BF, U+1F4C8-1F4CB, U+1F4D6, U+1F4DA, U+1F4DF, U+1F4E3-1F4E6, U+1F4EA-1F4ED, U+1F4F7, U+1F4F9-1F4FB, U+1F4FD-1F4FE, U+1F503, U+1F507-1F50B, U+1F50D, U+1F512-1F513, U+1F53E-1F54A, U+1F54F-1F5FA, U+1F610, U+1F650-1F67F, U+1F687, U+1F68D, U+1F691, U+1F694, U+1F698, U+1F6AD, U+1F6B2, U+1F6B9-1F6BA, U+1F6BC, U+1F6C6-1F6CF, U+1F6D3-1F6D7, U+1F6E0-1F6EA, U+1F6F0-1F6F3, U+1F6F7-1F6FC, U+1F700-1F7FF, U+1F800-1F80B, U+1F810-1F847, U+1F850-1F859, U+1F860-1F887, U+1F890-1F8AD, U+1F8B0-1F8BB, U+1F8C0-1F8C1, U+1F900-1F90B, U+1F93B, U+1F946, U+1F984, U+1F996, U+1F9E9, U+1FA00-1FA6F, U+1FA70-1FA7C, U+1FA80-1FA89, U+1FA8F-1FAC6, U+1FACE-1FADC, U+1FADF-1FAE9, U+1FAF0-1FAF8, U+1FB00-1FBFF;font-weight: 600;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9GYTbFhsqMA6aw.woff2)} @font-face {unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;font-weight: 600;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9H4TbFhsqMA6aw.woff2)} @font-face {unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;font-weight: 600;font-style: normal;font-family: 'Heebo';font-display: swap;src: url(https://fonts.gstatic.com/s/heebo/v26/NGS6v5_NC0k9P9H2TbFhsqMA.woff2)} @font-face {unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;font-weight: 500;font-style: normal;font-family: 'Signika';font-display: swap;src: url(https://fonts.gstatic.com/s/signika/v25/vEFO2_JTCgwQ5ejvMV0Ox_Kg1UwJ0tKfX6bOjM7-f7e0Mls.woff2)} @font-face {unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;font-weight: 500;font-style: normal;font-family: 'Signika';font-display: swap;src: url(https://fonts.gstatic.com/s/signika/v25/vEFO2_JTCgwQ5ejvMV0Ox_Kg1UwJ0tKfX6bPjM7-f7e0Mls.woff2)} @font-face {unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;font-weight: 500;font-style: normal;font-family: 'Signika';font-display: swap;src: url(https://fonts.gstatic.com/s/signika/v25/vEFO2_JTCgwQ5ejvMV0Ox_Kg1UwJ0tKfX6bBjM7-f7e0.woff2)} @font-face {unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;font-weight: 700;font-style: normal;font-family: 'Signika';font-display: swap;src: url(https://fonts.gstatic.com/s/signika/v25/vEFO2_JTCgwQ5ejvMV0Ox_Kg1UwJ0tKfX6bOjM7-f7e0Mls.woff2)} @font-face {unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;font-weight: 700;font-style: normal;font-family: 'Signika';font-display: swap;src: url(https://fonts.gstatic.com/s/signika/v25/vEFO2_JTCgwQ5ejvMV0Ox_Kg1UwJ0tKfX6bPjM7-f7e0Mls.woff2)} @font-face {unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;font-weight: 700;font-style: normal;font-family: 'Signika';font-display: swap;src: url(https://fonts.gstatic.com/s/signika/v25/vEFO2_JTCgwQ5ejvMV0Ox_Kg1UwJ0tKfX6bBjM7-f7e0.woff2)} :root{ --font-primary: 'Heebo', '_font_fallback_1367453240631', sans-serif; } @font-face { font-family: '_font_fallback_1367453240631'; size-adjust: 100.51%; src: local('Arial'); ascent-override: 104.26%; descent-override: 41.88%; line-gap-override: 0.00%; } :root{ --font-secondary: 'Signika', '_font_fallback_1257334435658', sans-serif; } @font-face { font-family: '_font_fallback_1257334435658'; size-adjust: 94.54%; src: local('Arial'); ascent-override: 99.42%; descent-override: 30.89%; line-gap-override: 0.00%; }</style><!-- responsive meta --><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><!-- title --><title>
      How did I create a REST api for any JSON object

    </title><!-- canonical url --><!-- noindex robots --><!-- meta-description --><meta name="description" content="A blog describes our refactoring when we turned our AST tree to be REST operational
"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.BZs-2RF_.js"></script><!-- author from config.json --><meta name="author" content="ara.foundation"><!-- og-title --><meta property="og:title" content="How did I create a REST api for any JSON object
"><!-- og-description --><meta property="og:description" content="A blog describes our refactoring when we turned our AST tree to be REST operational
"><meta property="og:type" content="website"><meta property="og:url" content="https://ara.foundation//blog/turning-code-piece-into-restful-api-with-sds-package"><!-- twitter-title --><meta name="twitter:title" content="How did I create a REST api for any JSON object
"><!-- twitter-description --><meta name="twitter:description" content="A blog describes our refactoring when we turned our AST tree to be REST operational
"><!-- og-image --><meta property="og:image" content="https://ara.foundation//images/og-image.png"><!-- twitter-image --><meta name="twitter:image" content="https://ara.foundation//images/og-image.png"><meta name="twitter:card" content="summary_large_image"><link rel="stylesheet" href="/_astro/_regular_.CoLdCupT.css"></head> <body>   <header class="header z-30 sticky top-0"> <nav class="navbar container"> <!-- logo --> <div class="order-0"> <a href="/" class="navbar-brand inline-block">  <img src="/_astro/logo.DtEOoL80_1OHHeK.webp" alt="Ara" loading="lazy" decoding="async" style="height:120px;width:150px" width="300" height="240" class="inline-block dark:hidden"> <img src="/_astro/logo-darkmode.feKz0F6D_X7Ucg.webp" alt="Ara" loading="lazy" decoding="async" style="height:120px;width:150px" width="300" height="240" class="hidden dark:inline-block"> </a> </div> <!-- navbar toggler --> <input id="nav-toggle" type="checkbox" class="hidden"> <label for="nav-toggle" class="order-3 cursor-pointer flex items-center lg:hidden text-text-dark dark:text-white lg:order-1"> <svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20"> <title>Menu Open</title> <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z"></path> </svg> <svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20"> <title>Menu Close</title> <polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"></polygon> </svg> </label> <!-- /navbar toggler --> <ul id="nav-menu" class="navbar-nav order-3 hidden w-full pb-6 lg:order-1 lg:flex lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8"> <li class="nav-item"> <a href="/" class="nav-link block false"> Home </a> </li><li class="nav-item"> <a href="/community" class="nav-link block false"> Community </a> </li><li class="nav-item"> <a href="/blog" class="nav-link block false"> Blogs </a> </li><li class="nav-item"> <a href="/roadmap" class="nav-link block false"> Roadmap </a> </li><li class="nav-item nav-dropdown group relative"> <span class="nav-link inline-flex items-center "> Projects <svg class="h-4 w-4 fill-current" viewBox="0 0 20 20"> <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path> </svg> </span> <ul class="nav-dropdown-list hidden group-hover:block lg:invisible lg:absolute lg:block lg:opacity-0 lg:group-hover:visible lg:group-hover:opacity-100"> <li class="nav-dropdown-item"> <a href="https://github.com/ara-foundation/web/blob/main/packages/p-hintjens/SDS.md" aria-label="SDS library" class="nav-dropdown-link block false"> SDS library </a> </li><li class="nav-dropdown-item"> <a href="https://github.com/ara-foundation/web/tree/main/packages/p-hintjens" aria-label="Rest library" class="nav-dropdown-link block false"> Rest library </a> </li><li class="nav-dropdown-item"> <a href="https://github.com/ara-foundation/web/tree/main/packages/reflect" aria-label="Reflect library" class="nav-dropdown-link block false"> Reflect library </a> </li> </ul> </li> <li class="mt-4 inline-block lg:hidden"> <a class="btn btn-outline-primary btn-sm" href="https://github.com/ara-foundation/web"> Get Started </a> </li> </ul> <div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0"> <button class="border-border text-text-dark hover:text-primary dark:border-darkmode-border mr-5 inline-block border-r pr-5 text-xl dark:text-white dark:hover:text-darkmode-primary" aria-label="search" data-search-trigger> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M456.69 421.39 362.6 327.3a173.81 173.81 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3zM97.92 222.72a124.8 124.8 0 1 1 124.8 124.8 124.95 124.95 0 0 1-124.8-124.8z"></path></svg> </button> <div class="theme-switcher mr-5"><input id="theme-switcher" data-theme-switcher type="checkbox"><label for="theme-switcher"><span class="sr-only">theme switcher</span><span><svg class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-100 dark:opacity-0" viewBox="0 0 56 56" fill="#fff" height="16" width="16"><path d="M30 4.6c0-1-.9-2-2-2a2 2 0 0 0-2 2v5c0 1 .9 2 2 2s2-1 2-2Zm9.6 9a2 2 0 0 0 0 2.8c.8.8 2 .8 2.9 0L46 13a2 2 0 0 0 0-2.9 2 2 0 0 0-3 0Zm-26 2.8c.7.8 2 .8 2.8 0 .8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9 0-.7.8-.7 2.1 0 3ZM28 16a12 12 0 0 0-12 12 12 12 0 0 0 12 12 12 12 0 0 0 12-12 12 12 0 0 0-12-12Zm23.3 14c1.1 0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 0 0-2 2c0 1.1 1 2 2 2ZM4.7 26a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2Zm37.8 13.6a2 2 0 0 0-3 0 2 2 0 0 0 0 2.9l3.6 3.5a2 2 0 0 0 2.9 0c.8-.8.8-2.1 0-3ZM10 43.1a2 2 0 0 0 0 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1 0-2.9-.8-.8-2-.8-2.9 0Zm20 3.4c0-1.1-.9-2-2-2a2 2 0 0 0-2 2v4.9c0 1 .9 2 2 2s2-1 2-2Z"></path></svg><svg class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-0 dark:opacity-100" viewBox="0 0 24 24" fill="none" height="16" width="16"><path fill="#000" fill-rule="evenodd" clip-rule="evenodd" d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4 0 0 0 8.7 1.8c1-.3 2 .5 1.5 1.5v.1a10.3 10.3 0 0 1-9.4 6.2A10.3 10.3 0 0 1 3.2 6.7c1-2 2.9-3.5 4.9-4.4Z"></path></svg></span></label></div><script type="module">const o=window.matchMedia("(prefers-color-scheme: dark)");o.addEventListener("change",()=>r(document.querySelectorAll("[data-theme-switcher]")));function r(e){const t=o.matches?"dark":"light",c=(localStorage.getItem("theme")||t)==="dark";e.forEach(a=>a.checked=c),document.documentElement.classList.toggle("dark",c)}const h=()=>{const e=document.querySelectorAll("[data-theme-switcher]");r(e),e.forEach(t=>{t.addEventListener("click",function(){const n=o.matches?"dark":"light",a=(localStorage.getItem("theme")||n)==="light"?"dark":"light";localStorage.setItem("theme",a),r(e)})})};h();document.addEventListener("astro:after-swap",h);</script> <a class="btn btn-outline-primary btn-sm hidden lg:inline-block" href="https://github.com/ara-foundation/web"> Get Started </a> </div> </nav> </header> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1WSXi6" prefix="r18" component-url="/_astro/SearchModal.C3v-StND.js" component-export="default" renderer-url="/_astro/client.BPIbHqJh.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;SearchModal&quot;,&quot;value&quot;:true}" await-children><div id="searchModal" class="search-modal"><div id="searchModalOverlay" class="search-modal-overlay"></div><div class="search-wrapper"><div class="search-wrapper-header"><label for="searchInput" class="absolute left-7 top-[calc(50%-7px)]"><span class="sr-only">search icon</span><svg viewBox="0 0 512 512" height="18" width="18" class="-mt-0.5"><title>search icon</title><path fill="currentcolor" d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8.0 45.3s-32.8 12.5-45.3.0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9.0 208S93.1.0 208 0 416 93.1 416 208zM208 352a144 144 0 100-288 144 144 0 100 288z"></path></svg></label><input id="searchInput" placeholder="Search..." class="search-wrapper-header-input" type="input" autoComplete="off" name="search" value=""/></div><div class="search-wrapper-body"><div class="py-8 text-center">Type something to search...</div></div><div class="search-wrapper-footer"><span class="flex items-center"><kbd><svg width="14" height="14" fill="currentcolor" viewBox="0 0 16 16"><path d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 011.506.0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 01-.753-1.659z"></path></svg></kbd><kbd><svg width="14" height="14" fill="currentcolor" viewBox="0 0 16 16"><path d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 001.506.0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 00-.753 1.659z"></path></svg></kbd>to navigate</span><span class="flex items-center"><kbd><svg width="12" height="12" fill="currentcolor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.5 1.5a.5.5.0 01.5.5v4.8a2.5 2.5.0 01-2.5 2.5H2.707l3.347 3.346a.5.5.0 01-.708.708l-4.2-4.2a.5.5.0 010-.708l4-4a.5.5.0 11.708.708L2.707 8.3H12.5A1.5 1.5.0 0014 6.8V2a.5.5.0 01.5-.5z"></path></svg></kbd>to select</span><span><kbd>ESC</kbd> to close</span></div></div></div><!--astro:end--></astro-island> <main id="main-content">  <section class="section pt-7"> <div class="container"> <div class="row justify-center"> <article class="lg:col-10">  <h1 class="h2 mb-4">How did I create a REST api for any JSON object</h1> <ul class="mb-4"> <li class="mr-4 inline-block"> <a href="/authors/medet-ahmetson"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="mr-2 -mt-1 inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M248 104c-53 0-96 43-96 96s43 96 96 96 96-43 96-96-43-96-96-96zm0 144c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm0-240C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-49.7 0-95.1-18.3-130.1-48.4 14.9-23 40.4-38.6 69.6-39.5 20.8 6.4 40.6 9.6 60.5 9.6s39.7-3.1 60.5-9.6c29.2 1 54.7 16.5 69.6 39.5-35 30.1-80.4 48.4-130.1 48.4zm162.7-84.1c-24.4-31.4-62.1-51.9-105.1-51.9-10.2 0-26 9.6-57.6 9.6-31.5 0-47.4-9.6-57.6-9.6-42.9 0-80.6 20.5-105.1 51.9C61.9 339.2 48 299.2 48 256c0-110.3 89.7-200 200-200s200 89.7 200 200c0 43.2-13.9 83.2-37.3 115.9z"></path></svg> Medet Ahmetson </a> </li> <li class="mr-4 inline-block"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mr-2 -mt-1 inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"></path></svg> <a href="/categories/rest"> Rest , </a><a href="/categories/sds"> Sds , </a><a href="/categories/reflect"> Reflect , </a><a href="/categories/refactoring"> Refactoring  </a> </li> <li class="mr-4 inline-block"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mr-2 -mt-1 inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"></path></svg> 17 May, 2025 </li> </ul> <div class="content mb-10"> <h2 id="intro">Intro</h2>
<p>Hey, there! I am refactoring my typescript library. I wanted to describe my journey on how I used <code>Rest</code> library to write elegant solution. I’m so excited that I wanted to share with others my solution, hoping it would help you as well.
<code>Rest</code> library that I want integrate allows to create RESTFul api for any JSON by the CSS Selectors as a querying language.</p>
<p>If you have a large object or deeply nested JSON. CSS Selectors allows a powerful filtering operation to find right element at right nesting. But it’s not about the library, but how it became elegant and saved me headaches in a long run.</p>
<p>Firstly, to give a context, let me describe a library that I am refactoring. A little bit about how the library works internally. I will explain the part used in this refactoring journey. Stay with me till the end, and I hope you will also appreciate by my choice of Rest as the elegant solution. And if you will be in the same situation as I am, hopefully Rest could help you as well. :)</p>
<blockquote>
<p>Rest module is open source and released already. It’s available in the <code>@ara-web/sds</code> package in <a href="npmjs.com">npmjs</a>.</p>
</blockquote>
<h2 id="refactoring">Refactoring</h2>
<p>The library that I am refactoring is called Reflect package. <em>Not released yet</em>. If you are a frontend developer, then with Reflect, you could change data or UI right in your browser console instead opening up the the code editor.</p>
<blockquote>
<p>I created it, after getting tired by adjusting CSS. Also, if I had to change the text on the page, I had to go to my code editor, type <code>"Lorum ipsum.Nospace after dot"</code> to find the file. And all of it just to fix the typo. Reflect is the CMS, and Admin panel without being CMS and Admin panel, but only is a Nodejs package that works with any framework.</p>
</blockquote>
<p>How it is working internally? Reflect creates Ontological data of the files. Ontological data is stored in the JSON format. Ontology simply means the files will be linked internally.</p>
<p>Reflect also supports the dynamic data. For example, if a web component parameter depends on a data fetched from the database. Reflect will fetch content from the database. Then, add the result into the JSON representation of the web component.</p>
<p>The dynamic data of the website are called <code>CodePiece</code>.
Code pieces are component scripts. For example, if a web component depends on variable <code>var userName = db.getUserId(session)</code>, then Code Piece will be the result of database request assigned to the user name.</p>
<p>Code pieces are used internally, and results are in the <code>Reflect</code> memory: <a href="https://github.com/ara-foundation/web/blob/aab7c4c744ed6748e3ca5942820cdf259d81d090/packages/reflect/src/code-piece-memory.ts#L10">CodePieceMemory</a> memory.</p>
<p>Reflect Memory keeps key-value pair of the code pieces and their identifiers. Key-Value pairs are defined in <a href="https://github.com/ara-foundation/web/blob/aab7c4c744ed6748e3ca5942820cdf259d81d090/packages/reflect/src/code-level/code-piece.ts#L22">CodePieceRecord</a> type.</p>
<p>As code pieces also have the types. Type might be a variable
declaration, a function call, a class or a type definition etc. The potential types of code pieces is defined in <a href="https://github.com/ara-foundation/web/blob/aab7c4c744ed6748e3ca5942820cdf259d81d090/packages/reflect/src/code-level/code-piece.ts#L6">CodePieceType</a> enum.</p>
<p>But interaction with this key-value memory isn’t flexible.
If we want to receive a code by the code piece type, or do
they have certain attribute, then generating additional
interface adds more code lines.</p>
<p>Luckily, creating <code>Rest</code> module for collaboration website, I found that using it for memory is also useful.
If I will need a result from memory, I could use <code>CodePieceMemory.get</code>, <code>CodePieceMemory.post</code> and other rest operations. And filtering is done by the Rest.</p>
<h2 id="what-do-i-need-to-do-to-use-rest-in-my-code">What do I need to do to use Rest in my code?</h2>
<p>Rest doesn’t work with JSON straight away. Rest works with the ontological object tree. So, we need to define ontological object node, and tree builder that can convert our JSON into ontological nodes.</p>
<p>Ontological means, instead IDs, we use links.
If I say, this is ontological array, then array may be, elements of array, or size of array may be linked to another data within the project. That to understand the array, you need to find elements by the link. Basically, ontological array defines what it presents. Your source codes don’t need it, as they have module importing rules provided by the package managers.
Databases also don’t need it, since they have <code>foreign-keys</code>.
But if we want to have inter-related JSON that is agnostic of database, or file system which means we can share it, we can use it in anywhere. Then, we need it.</p>
<p>So, we the first step is to design the ontology of our code piece. Which means the links. To make it work with CSS Selectors, our links should be extending Object Links.</p>
<blockquote>
<p>1 First step in using Rest API for any JSON:
<strong>Design Linking rules for objects compatible with ObjectLink</strong></p>
</blockquote>
<h2 id="1-ontology-code-piece-links-as-object-links">1. Ontology, code piece links as object links</h2>
<p>Object Links are based on CSS Selectors. It’s compatible with the CSS, so, any CSS Parser would understand object links as well.</p>
<p><strong>Valid Object Links</strong></p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="css"><code><span class="line"><span style="color:#E06C75">div</span><span style="color:#61AFEF">#main-content</span><span style="color:#7F848E;font-style:italic">        /* main-content element in the page */</span></span>
<span class="line"><span style="color:#E06C75">a</span><span style="color:#C678DD">[</span><span style="color:#D19A66">href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"google.com"</span><span style="color:#C678DD">]</span><span style="color:#7F848E;font-style:italic">    /* all links to google.com          */</span></span>
<span class="line"><span style="color:#D19A66">.btn-primary</span><span style="color:#7F848E;font-style:italic">            /* all primary buttons              */</span></span></code></pre>
<p>Object Links provide four ways to build selectors:</p>
<ul>
<li>ID</li>
<li>Tag</li>
<li>Class</li>
<li>Attribute</li>
</ul>
<p>We need to think, how do we design our JSON links, to match our data to object link’s four selectors.</p>
<h3 id="11-defining-link-selectors-to-our-json-object">1.1 Defining link selectors to our JSON object.</h3>
<p>In Reflect, Code pieces are already stored using identifiers. So, we will match it with id selector.
If we have a variable <code>let userName</code>; Then we could
fetch it using <code>#userName</code> link.</p>
<p>Code Pieces have its own attributes such as <code>public</code>, <code>data</code>,
<code>dataType</code> etc. If we want to fetch all <code>const varName</code> variables, then we could fetch using <code>[constant]</code>,
if we want to fetch all <code>let varName</code>, then we could write <code>[constant!=true]</code>.</p>
<p>Our code pieces have a type. Let them be the tag of code piece. To return all variable declarations we could write <code>var</code>, to return all type declarations we could write <code>type</code>.</p>
<p>When it comes to classes, we don’t need them.</p>
<h3 id="12-writing-the-code-for-object-link-creation">1.2 Writing the code for Object Link creation</h3>
<p>So let’s create Object Node builder four our code pieces. What will be the Rest operations work with? With the code pieces in a single memory. So, each module have it’s own object tree from code pieces.</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">OkResult</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> "@ara-web/p-hintjens"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#C678DD">type</span><span style="color:#E06C75"> ObjectToNodeTree</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">type</span><span style="color:#E06C75"> ElementOp</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">ObjectNode</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">DOCUMENT_SELECTOR</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> "@ara-web/sds"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#C678DD"> const</span><span style="color:#61AFEF"> moduleToObjectTree</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">ObjectToNodeTree</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">CodePiece</span><span style="color:#ABB2BF">> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> (): </span><span style="color:#E5C07B">ObjectNode</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">CodePiece</span><span style="color:#ABB2BF">> </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    // Creating the root for entire source code that has one or many code pieces.</span></span>
<span class="line"><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> doc</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> ObjectNode</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">CodePiece</span><span style="color:#ABB2BF">>(</span><span style="color:#E06C75">codePieceOps</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#E06C75"> doc</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<p>The <code>codePieceOps</code> is the helpful translators, that in request by Object Node, will return respectful CSS Selector.</p>
<p>Here is the declaration:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#C678DD">export</span><span style="color:#C678DD"> const</span><span style="color:#E5C07B"> codePieceOps</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">ElementOp</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E5C07B">CodePiece</span><span style="color:#ABB2BF">> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">	getName</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">getCodePieceName</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">	getChildren</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">getCodePieceChildren</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">	getAttribute</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">getCodePieceAttribute</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">	setAttribute</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">setCodePieceAttribute</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<p>Code Piece Operations define four functions that CSS Selectors use for every object node.
Before starting to write code pieces, we already designed how we will define the css selectors.</p>
<p>We could solve if one condition.</p>
<p>The element operator that returns ID selector of the <code>CodePiece</code>:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#C678DD">const</span><span style="color:#61AFEF"> getCodePieceName</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">_element</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">CodePiece</span><span style="color:#ABB2BF">): </span><span style="color:#E5C07B">string</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">	if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">_element</span><span style="color:#56B6C2"> ===</span><span style="color:#D19A66"> undefined</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">		return</span><span style="color:#E5C07B"> DOCUMENT_SELECTOR</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#E5C07B"> _element</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">identifier</span><span style="color:#56B6C2">!</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<p>And other code piece operations:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#C678DD">const</span><span style="color:#61AFEF"> getCodePieceChildren</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">el</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">CodePiece</span><span style="color:#ABB2BF">): </span><span style="color:#E5C07B">CodePiece</span><span style="color:#ABB2BF">[] </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">	return</span><span style="color:#E5C07B"> el</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getAllMemoryData</span><span style="color:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#61AFEF"> getCodePieceAttribute</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">_element</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">CodePiece</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">undefined</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">attrName</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">): </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">undefined</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">	if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">_element</span><span style="color:#56B6C2"> ===</span><span style="color:#D19A66"> undefined</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">		return</span><span style="color:#D19A66"> undefined</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">attrName</span><span style="color:#C678DD"> in</span><span style="color:#E06C75"> _element</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">        return</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">_element</span><span style="color:#C678DD"> as</span><span style="color:#E5C07B"> any</span><span style="color:#ABB2BF">)[</span><span style="color:#E06C75">attrName</span><span style="color:#ABB2BF">]?.</span><span style="color:#61AFEF">toString</span><span style="color:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#C678DD">	return</span><span style="color:#D19A66"> undefined</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#61AFEF"> setCodePieceAttribute</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> &#x3C;</span><span style="color:#E5C07B">AttrType</span><span style="color:#ABB2BF">>(</span><span style="color:#E06C75;font-style:italic">_element</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">CodePiece</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">undefined</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">attrName</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">attrValue</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">AttrType</span><span style="color:#ABB2BF">): </span><span style="color:#E5C07B">OkResult</span><span style="color:#C678DD"> =></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">	if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">_element</span><span style="color:#56B6C2"> ===</span><span style="color:#D19A66"> undefined</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">		return</span><span style="color:#E5C07B"> OkResult</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">ok</span><span style="color:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#C678DD">	if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">attrName</span><span style="color:#C678DD"> in</span><span style="color:#E06C75"> _element</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#ABB2BF">		(</span><span style="color:#E06C75">_element</span><span style="color:#C678DD"> as</span><span style="color:#E5C07B"> any</span><span style="color:#ABB2BF">)[</span><span style="color:#E06C75">attrName</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#E06C75"> attrValue</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD">		return</span><span style="color:#E5C07B"> OkResult</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">ok</span><span style="color:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF">	} </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">		return</span><span style="color:#E5C07B"> OkResult</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">fail</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">`The </span><span style="color:#C678DD">${</span><span style="color:#E5C07B">_element</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">identifier</span><span style="color:#C678DD">}</span><span style="color:#98C379"> has no attributes`</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">`Can not set </span><span style="color:#C678DD">${</span><span style="color:#E06C75">attrName</span><span style="color:#C678DD">}</span><span style="color:#98C379"> to non attributal element`</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<p>Voila. Our <code>code-piece-object-tree.ts</code> is ready, how do we set the CodePieceTree?
So, how do we use it and replace our previous code?</p>
<h3 id="13-updating-code-to-use-rest">1.3 Updating code to use REST</h3>
<p>Let me check who is depending on the <code>CodePieceMemory</code>. What I did
is basically removed the code piece and turned it into a REST node
based on <code>CodePiece</code>.</p>
<blockquote>
<p>Offtopic:
Luckily, I also follow the SDS rule, which makes CodePieceMemory local file and doesn’t have to worry that removing it will break entire code.</p>
</blockquote>
<p>The CodePieceMemory is part of <code>ModuleMemory</code> that along with code pieces keeps
it’s source code, file path, and other attributes.</p>
<p>What we need to do now is to update <code>ModuleMemory</code> to remove CodePiece and use the REST.</p>
<hr>
<blockquote>
<p>1 day later</p>
</blockquote>
<hr>
<p>I did replace <code>class ModuleMemory&#x3C;T> extends CodePieceMemory</code>
with the simple <code>ModuleMemory&#x3C;T></code> with the <code>rest()</code> method returning <code>Rest&#x3C;CodePiece></code>.</p>
<p>Now, I can simply fetch data from module memory using `memory.rest.get!(‘#varName’) to fetch the result of the variable.</p>
<p>Check out the test files on <a href="https://github.com/ara-foundation/web/blob/27216bc54fa2cdd8764051d6da720cba30c79b4e/packages/reflect/test/type-declaration.test.ts#L37">GitHub</a>.</p> </div> <div class="row items-start justify-between"> <div class="mb-10 flex items-center lg:col-5 lg:mb-0"> <h5 class="mr-3">Tags :</h5> <ul> <li class="inline-block"> <a class="m-1 block rounded bg-light px-3 py-1 hover:bg-primary hover:text-white dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark" href="/tags/refactoring"> Refactoring </a> </li><li class="inline-block"> <a class="m-1 block rounded bg-light px-3 py-1 hover:bg-primary hover:text-white dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark" href="/tags/reflect"> Reflect </a> </li><li class="inline-block"> <a class="m-1 block rounded bg-light px-3 py-1 hover:bg-primary hover:text-white dark:bg-darkmode-light dark:hover:bg-darkmode-primary dark:hover:text-text-dark" href="/tags/exciting"> Exciting </a> </li> </ul> </div> <div class="flex items-center lg:col-4"> <h5 class="mr-3">Share :</h5> <ul class="social-icons"> <li class="inline-block"> <!-- Place this tag where you want the button to render. --> <a class="github-button" href="https://www.linkedin.com/shareArticle?url=https://ara.foundation//turning-code-piece-into-restful-api-with-sds-package" data-color-scheme="no-preference: light; light: light; dark: dark;" data-size="large" target="_blank" aria-label="Star ara-foundation/web on GitHub"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M444.17 32H70.28C49.85 32 32 46.7 32 66.89v374.72C32 461.91 49.85 480 70.28 480h373.78c20.54 0 35.94-18.21 35.94-38.39V66.89C480.12 46.7 464.6 32 444.17 32zm-273.3 373.43h-64.18V205.88h64.18zM141 175.54h-.46c-20.54 0-33.84-15.29-33.84-34.43 0-19.49 13.65-34.42 34.65-34.42s33.85 14.82 34.31 34.42c-.01 19.14-13.31 34.43-34.66 34.43zm264.43 229.89h-64.18V296.32c0-26.14-9.34-44-32.56-44-17.74 0-28.24 12-32.91 23.69-1.75 4.2-2.22 9.92-2.22 15.76v113.66h-64.18V205.88h64.18v27.77c9.34-13.3 23.93-32.44 57.88-32.44 42.13 0 74 27.77 74 87.64z"></path></svg> </a> </li> <li class="inline-block"> <a aria-label="twitter share button" href="https://twitter.com/intent/tweet/?text=How did I create a REST api for any JSON object&amp;url=https://ara.foundation//turning-code-piece-into-restful-api-with-sds-package" target="_blank" class="twitter-follow-button" rel="noreferrer noopener"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M496 109.5a201.8 201.8 0 0 1-56.55 15.3 97.51 97.51 0 0 0 43.33-53.6 197.74 197.74 0 0 1-62.56 23.5A99.14 99.14 0 0 0 348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 0 0 2.54 22.1 280.7 280.7 0 0 1-203-101.3A95.69 95.69 0 0 0 36 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0 1 35.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 0 1-25.94 3.4 94.38 94.38 0 0 1-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0 1 39.5 405.6a203 203 0 0 1-23.5-1.4A278.68 278.68 0 0 0 166.74 448c181.36 0 280.44-147.7 280.44-275.8 0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 0 0 496 109.5z"></path></svg> </a> </li> <li class="inline-block"> <a aria-label="telegram share button" href="https://telegram.me/share/url?url=https://ara.foundation//turning-code-piece-into-restful-api-with-sds-package&text=How did I create a REST api for any JSON object" target="_blank" rel="noreferrer noopener"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m476.59 227.05-.16-.07L49.35 49.84A23.56 23.56 0 0 0 27.14 52 24.65 24.65 0 0 0 16 72.59v113.29a24 24 0 0 0 19.52 23.57l232.93 43.07a4 4 0 0 1 0 7.86L35.53 303.45A24 24 0 0 0 16 327v113.31A23.57 23.57 0 0 0 26.59 460a23.94 23.94 0 0 0 13.22 4 24.55 24.55 0 0 0 9.52-1.93L476.4 285.94l.19-.09a32 32 0 0 0 0-58.8z"></path></svg> </a> </li> </ul> </div> </div> <astro-island uid="2dtkgG" prefix="r17" component-url="/_astro/Disqus.BhMHK4-p.js" component-export="default" renderer-url="/_astro/client.BPIbHqJh.js" props="{&quot;className&quot;:[0,&quot;mt-20&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;Disqus&quot;,&quot;value&quot;:true}" await-children><div class="mt-20"><div id="disqus_thread"></div></div><!--astro:end--></astro-island> </article> </div> <!-- Related posts --> <div class="section pb-0"> <h2 class="h3 mb-12 text-center">Related Posts</h2> <div class="row justify-center">  </div> </div> </div> </section>  </main> <footer class="bg-light dark:bg-darkmode-light"> <div class="container"> <div class="row items-center py-10"> <div class="mb-8 text-center lg:col-3 lg:mb-0 lg:text-left"> <a href="/" class="navbar-brand inline-block">  <img src="/_astro/logo.DtEOoL80_1OHHeK.webp" alt="Ara" loading="lazy" decoding="async" style="height:120px;width:150px" width="300" height="240" class="inline-block dark:hidden"> <img src="/_astro/logo-darkmode.feKz0F6D_X7Ucg.webp" alt="Ara" loading="lazy" decoding="async" style="height:120px;width:150px" width="300" height="240" class="hidden dark:inline-block"> </a> </div> <div class="mb-8 text-center lg:col-6 lg:mb-0"> <ul> <li class="m-3 inline-block"> <a href="/contact">Contact us</a> </li><li class="m-3 inline-block"> <a href="/community">Our community</a> </li> </ul> </div> <div class="mb-8 text-center lg:col-3 lg:mb-0 lg:mt-0 lg:text-right"> <ul class="social-icons"> <li> <a aria-label="telegram" href="https://t.me/arasangha" target="_blank" rel="noopener noreferrer nofollow"> <span class="sr-only">telegram</span> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z"></path></svg> </a> </li><li> <a aria-label="twitter" href="twitter.com/ara_foundation_" target="_blank" rel="noopener noreferrer nofollow"> <span class="sr-only">twitter</span> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> </li><li> <a aria-label="github" href="https://www.github.com/ara-foundation/web" target="_blank" rel="noopener noreferrer nofollow"> <span class="sr-only">github</span> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> </li><li> <a aria-label="linkedin" href="https://www.youtube.com/@medet-ahmetson" target="_blank" rel="noopener noreferrer nofollow"> <span class="sr-only">linkedin</span> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" class="inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg> </a> </li> </ul> </div> </div> </div> <div class="border-t border-border py-7 dark:border-darkmode-border"> <div class="container text-center text-text-light dark:text-darkmode-text-light"> <p>Made by <a href="https://ara.foundation">Ara Foundation</a> 2025.</p> </div> </div> </footer> </body></html>